<th:block th:include="@{admin/_header.html}"/>

<th:block th:if="${group.equals('notice')}">
<script>
$(function(){
	$('select[name=cate]').on("change",function() {
		let group = $('input[name=group]').val();
		let cate = $(this).val();
		location.href = "/Kmarket2/admin/cs/list?pg=1&group="+group+"&cate="+cate;
		
	});
});
</script>
</th:block>
 
<section id="csList">
		<nav th:if="${group.equals('notice')}">
	        <h3>공지사항 목록</h3>
	        <p>HOME > 고객센터 ><strong>공지사항</strong></p>
	    </nav>
		<nav th:if="${group.equals('faq')}">
	        <h3>자주묻는질문 목록</h3>
	        <p>HOME > 고객센터 ><strong>자주묻는질문</strong></p>
	    </nav>
		<nav th:if="${group.equals('qna')}">
	        <h3>문의하기 목록</h3>
	        <p>HOME > 고객센터 ><strong>문의하기</strong></p>
	    </nav>
	   
    <select name="cate" id="cate">
    	<th:block th:if="${group.equals('notice')}">
    	<option value="0">유형선택</option>
    	<option th:each="ca : ${cates}" th:value="${ca.key}" th:selected="${ca.key}==${cate}" >[[${ca.value}]]</option>
    	</th:block>
    	<th:block th:if="${group.equals('qna') || group.equals('faq') }">
    	<option value="0">1차유형</option>
    	<option th:each="ca : ${cates}" th:value="${ca.key}" th:selected="${ca.key}==${cate}" >[[${ca.value}]]</option>
    	</th:block>
    </select>
    <select th:if="${group.equals('qna') || group.equals('faq') }" name="cate2" id="cate2">
    	<option value="0">2차유형</option>
    </select>
    <table>
    	<tr>
    		<th><input type="checkbox" name="selectAll" c></th>
    		<th>번호</th>
	   			<th th:if="${group.equals('notice')}">유형</th>
	   			<th:block th:if="${group.equals('faq') || group.equals('qna')}">
	   			<th>1차유형</th>
	   			<th>2차유형</th>
	   			</th:block>
    		<th>제목</th>
	    		<th:block th:if="${group.equals('notice') || group.equals('faq')}">
	    			<th>조회</th>
	    			<th>날짜</th>
	    			<th>관리</th>
	    		</th:block>
	    		<th:block th:if="${group.equals('qna')}">
	    			<th>작성자</th>
	    			<th>작성일</th>
	    			<th>상태</th>
	    		</th:block>
    	</tr>
    	
    	<tr th:each="arti,status : ${articles}">
    		<td class="chk${status.index}"><input type="checkbox" name="select" th:value="${arti.no}"></td>
    		
    		<td th:if="${group.equals('notice')||group.equals('qna')}">[[${pageStartNum-status.index}]]</td>
    		<td th:if="${group.equals('faq')}">[[${10-status.index}]]</td>
    		<td th:each="ca : ${cates}" th:if="${ca.value == arti.cate}">[[${ca.value}]]</td>
    		
    		<th:block th:each="ca2 : ${articate2s}" th:if="${arti.cate.equals(ca2.cate) && arti.cate2.equals(ca2.cate2)}">
    			<td>[[${ca2.c2Name}]]</td>
    		</th:block>
    		
    		<td><a th:href="@{/admin/cs/view(no=${arti.no},group=${group})}">[[${arti.title}]]</a></td>
    		<td th:if="${group != 'qna'}">[[${arti.hit}]]</td>
    		<td th:if="${group == 'qna'}">[[${arti.uid}]]</td>
    		<td>[[${arti.rdate}]]</td>
    		<td th:if="${group != 'qna'}">
    			<a href="/Java1_Kmarket1/admin/cs/modify.do?no=${arti.no}&group=${group}">수정</a>
    			<a href="/Java1_Kmarket1/admin/cs/delete.do?no=${arti.no}&group=${group}">삭제</a>
    		</td>
    		<td th:if="${group == 'qna' && arti.comment == 0}">
    			검토중
    		</td>
    		<td th:if="${group == 'qna' && arti.comment != 0}">
    			<span style="color: #067dfd; font-weight: bold;" >답변완료</span> 
    		</td>
    	</tr>
    </table>
    
    <div class="page">
    <th:block th:if="${group != 'faq'}">
	    <a th:if="${pageGroupStart gt 1 && cate != null}" th:href="@{/admin/cs/list(pg=${pageGroupStart-1},cate=${cate},group=${group})}" class="prev">이전</a>
	    <a th:if="${pageGroupStart gt 1 && cate == null}" th:href="@{/admin/cs/list(pg=${pageGroupStart-1},group=${group})}" class="prev">이전</a>
	    <th:block th:each="num,numStat : ${#numbers.sequence(pageGroupStart,pageGroupEnd)}">
	    <a th:if="${cate != null}" th:href="@{/admin/cs/list(pg=${i},cate=${cate},group=${group})}" class="num" th:classappend="${currentPage}==${num}?'on':''">[[${i}]]</a>
	    <a th:if="${cate == null}" th:href="@{/admin/cs/list(pg=${i},group=${group})}" class="num" th:classappend="${currentPage}==${num}?'on':''">[[${i}]]</a>
	    </th:block>
	    <a th:if="${pageGroupEnd lt lastPageNum && cate != null}" th:href="@{/admin/cs/list(pg=${pageGroupStart+1},cate=${cate},group=${group})}" class="next">다음</a>
	    <a th:if="${pageGroupEnd lt lastPageNum && cate == null}"th:href="@{/admin/cs/list(pg=${pageGroupStart+1},group=${group})}" class="next">다음</a>
	</th:block>
    </div>
    
    <a href="#" class="btn btnDel">선택삭제</a>
    <c:choose>
    		<a th:if="${group != 'qna'}" th:href="@{/admin/cs/write(group=${group})}" class="btn btnWrite">작성하기</a>
    		<a th:if="${group == 'qna'}" th:href="@{/cs/qna/list}" class="btn btnWrite">문의하기</a>
    </c:choose>
    
    <input type="hidden" name="group" value="${group}">
    <input type="hidden" name="cate" value="${cate}">
    <input type="hidden" name="cate2" value="${cate2}">
</section>

<th:block th:include="@{admin/_footer.html}"/>
